<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        // Theme detection - runs before page renders to prevent flash
        (function() {
            const stored = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = stored || (prefersDark ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Impact on Software Engineering - 2025 OSS Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #F97316;
            --secondary: #5a9997;
            --success: #22c55e;
            --warning: #eab308;
            --error: #ef4444;
            --purple: #a855f7;
        }

        [data-theme="dark"] {
            --bg-main: #1e1e1e;
            --bg-card: #2a2a28;
            --text: #ccc9c0;
            --text-muted: #8a8880;
            --border: #3c3c3a;
            --grid: #3c3c3a;
        }

        [data-theme="light"] {
            --bg-main: #f8f9fa;
            --bg-card: #ffffff;
            --text: #1f2937;
            --text-muted: #6b7280;
            --border: #e5e7eb;
            --grid: #e5e7eb;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-main);
            color: var(--text);
            line-height: 1.6;
            padding: 2rem;
            transition: background 0.3s, color 0.3s;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: var(--bg-card);
            border-radius: 16px;
            border: 1px solid var(--border);
            position: relative;
        }

        .theme-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            color: var(--text);
            cursor: pointer;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .theme-toggle:hover { border-color: var(--primary); }

        h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        .subtitle { color: var(--primary); font-size: 1.25rem; font-weight: 500; }
        .meta { color: var(--text-muted); font-size: 0.9rem; margin-top: 1rem; }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2.25rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: var(--primary);
        }

        .stat-value.positive { color: var(--success); }
        .stat-value.negative { color: var(--error); }
        .stat-value.neutral { color: var(--secondary); }

        .stat-label { color: var(--text-muted); font-size: 0.85rem; margin-top: 0.5rem; }

        section { margin: 3rem 0; }
        h2 {
            font-size: 1.75rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary);
        }
        h3 { font-size: 1.25rem; color: var(--text); margin: 1.5rem 0 1rem; }

        .chart-container {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .chart-wrapper { position: relative; height: 300px; }
        .chart-wrapper.tall { height: 450px; }
        .chart-wrapper.extra-tall { height: 550px; }

        .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
        .three-col { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; }

        @media (max-width: 1024px) { .three-col { grid-template-columns: 1fr 1fr; } }
        @media (max-width: 768px) { .two-col, .three-col { grid-template-columns: 1fr; } }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: rgba(249, 115, 22, 0.1);
            color: var(--primary);
            font-weight: 600;
        }

        tr:hover { background: rgba(249, 115, 22, 0.05); }

        .badge {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            font-family: 'JetBrains Mono', monospace;
        }

        .badge-success { background: rgba(34, 197, 94, 0.2); color: var(--success); }
        .badge-warning { background: rgba(234, 179, 8, 0.2); color: var(--warning); }
        .badge-error { background: rgba(239, 68, 68, 0.2); color: var(--error); }
        .badge-primary { background: rgba(249, 115, 22, 0.2); color: var(--primary); }
        .badge-purple { background: rgba(168, 85, 247, 0.2); color: var(--purple); }

        .insight-box {
            background: rgba(90, 153, 151, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 1rem 1.5rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }

        .insight-box strong { color: var(--secondary); }

        .takeaway-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .takeaway-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            border-left: 4px solid var(--primary);
        }

        .takeaway-card h4 {
            color: var(--primary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .takeaway-card p { color: var(--text-muted); font-size: 0.9rem; }

        .takeaway-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .download-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            text-decoration: none;
            font-size: 0.85rem;
        }

        .download-btn:hover { border-color: var(--primary); color: var(--primary); }

        .methodology {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .methodology h3 { color: var(--primary); }
        .methodology ul { list-style: none; margin: 1rem 0; }
        .methodology li { padding: 0.5rem 0; padding-left: 1.5rem; position: relative; }
        .methodology li::before {
            content: ">";
            position: absolute;
            left: 0;
            color: var(--primary);
            font-family: 'JetBrains Mono', monospace;
        }

        /* Detection Comparison Section */
        .comparison-section {
            background: linear-gradient(135deg, rgba(90, 153, 151, 0.1) 0%, rgba(249, 115, 22, 0.05) 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2.5rem;
            margin: 3rem 0;
        }

        .comparison-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .comparison-header h2 {
            border: none;
            margin: 0;
            padding: 0;
        }

        .comparison-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .comparison-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .comparison-stat {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .comparison-stat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary);
        }

        .comparison-stat.success::before { background: var(--success); }
        .comparison-stat.secondary::before { background: var(--secondary); }
        .comparison-stat.purple::before { background: var(--purple); }

        .comparison-stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            line-height: 1;
        }

        .comparison-stat-label {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 0.5rem;
        }

        .comparison-stat-sublabel {
            font-size: 0.75rem;
            color: var(--text-muted);
            opacity: 0.7;
            margin-top: 0.25rem;
        }

        .method-cards {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1.5rem;
            margin: 2rem 0;
            align-items: stretch;
        }

        @media (max-width: 900px) {
            .method-cards { grid-template-columns: 1fr; }
            .method-vs { display: none; }
        }

        .method-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .method-card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .method-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .method-icon.regex { background: rgba(249, 115, 22, 0.2); }
        .method-icon.llm { background: rgba(168, 85, 247, 0.2); }

        .method-card-title {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .method-card-subtitle {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .method-card-value {
            font-size: 2rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: var(--primary);
        }

        .method-card-rate {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .method-vs {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .method-vs-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--bg-main);
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .tool-comparison-table {
            width: 100%;
            margin: 1.5rem 0;
        }

        .tool-comparison-table th {
            background: transparent;
            border-bottom: 2px solid var(--border);
            padding: 1rem;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }

        .tool-comparison-table td {
            padding: 0.875rem 1rem;
        }

        .tool-comparison-table tr:hover {
            background: rgba(249, 115, 22, 0.05);
        }

        .tool-name {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tool-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .delta-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 500;
            font-family: 'JetBrains Mono', monospace;
        }

        .delta-badge.positive {
            background: rgba(34, 197, 94, 0.15);
            color: var(--success);
        }

        .delta-badge.negative {
            background: rgba(239, 68, 68, 0.15);
            color: var(--error);
        }

        .agreement-bar {
            position: relative;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .agreement-bar-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .key-insight-card {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(90, 153, 151, 0.1) 100%);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .key-insight-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--success);
            font-weight: 600;
        }

        .key-insight-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .key-insight-list li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text);
        }

        .key-insight-list li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--success);
            font-weight: bold;
        }

        .key-insight-list strong {
            color: var(--primary);
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
            font-size: 0.85rem;
            border-top: 1px solid var(--border);
            margin-top: 3rem;
        }

        .logo { font-size: 1.5rem; font-weight: 700; color: var(--primary); margin-bottom: 0.5rem; }
        .mono { font-family: 'JetBrains Mono', monospace; }

        @media print {
            body { background: white; color: #333; }
            .stat-card, .chart-container, .methodology, .takeaway-card { background: #f5f5f5; border-color: #ddd; }
            .theme-toggle { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button class="theme-toggle" onclick="toggleTheme()">
                <span id="theme-icon">‚òÄÔ∏è</span>
                <span id="theme-label">Light</span>
            </button>
            <div class="logo">tformance</div>
            <h1>AI Impact on Software Engineering</h1>
            <p class="subtitle">Analysis of 60,545 PRs from 26 Open Source Teams</p>
            <p class="meta">Research Period: January 1 - December 25, 2025 | Generated: December 26, 2025</p>
        </header>

        <!-- KEY TAKEAWAYS - AT TOP -->
        <section>
            <h2>Key Takeaways for Engineering Leaders</h2>
            <div class="takeaway-grid">
                <div class="takeaway-card">
                    <h4><span class="takeaway-number">1</span> Mixed Tool Strategy Wins</h4>
                    <p>Teams using bot + IDE + LLM combinations show better outcomes than single-tool teams. Antiwork's 61.9% adoption with mixed tools yielded <strong>-8.5% cycle time</strong> and <strong>-50.2% review time</strong>.</p>
                </div>
                <div class="takeaway-card">
                    <h4><span class="takeaway-number">2</span> Review Velocity is Consistent</h4>
                    <p>15 out of 26 teams show faster review times with AI assistance. Average improvement: <strong>-31%</strong>. AI-generated code appears easier to review.</p>
                </div>
                <div class="takeaway-card">
                    <h4><span class="takeaway-number">3</span> Autonomous Agents Growing Fast</h4>
                    <p>Cubic went from <strong>0 ‚Üí 347 PRs/month</strong> (Jan‚ÜíNov). Autonomous agents (Devin, Cubic) now represent <strong>30.7%</strong> of all AI tool usage.</p>
                </div>
                <div class="takeaway-card">
                    <h4><span class="takeaway-number">4</span> 40-60% is Sweet Spot</h4>
                    <p>Very high adoption (>80%) correlates with larger cycle times. Best-performing teams (Antiwork, Trigger.dev) maintain balanced 40-60% AI usage.</p>
                </div>
                <div class="takeaway-card">
                    <h4><span class="takeaway-number">5</span> Tool Diversification Accelerating</h4>
                    <p>Jan: CodeRabbit had <strong>95%+ share</strong>. Dec: CodeRabbit <strong>36%</strong>, Cubic <strong>21%</strong>, Claude <strong>17%</strong>. The market is fragmenting rapidly.</p>
                </div>
            </div>
        </section>

        <section>
            <h2>Executive Summary</h2>
            <div class="stat-grid">
                <div class="stat-card">
                    <div class="stat-value">60,545</div>
                    <div class="stat-label">Total Pull Requests</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">26</div>
                    <div class="stat-label">Teams Analyzed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value neutral">21.2%</div>
                    <div class="stat-label">AI-Assisted PRs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value positive">-31%</div>
                    <div class="stat-label">Avg Review Time Change</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value negative">+42%</div>
                    <div class="stat-label">Avg Cycle Time Change</div>
                </div>
            </div>

            <div class="insight-box">
                <strong>Key Finding:</strong> AI tools consistently speed up code review (-31% avg), but often extend overall cycle time (+42% avg). This suggests teams are tackling more complex work with AI assistance, not just doing the same work faster.
            </div>
        </section>

        <!-- TOOL TRENDS OVER TIME - NEW SECTION -->
        <section>
            <h2>AI Tool Evolution (2025)</h2>
            <p style="color: var(--text-muted); margin-bottom: 1rem;">Monthly trend of AI tool usage across all teams. Shows dramatic market shift throughout the year.</p>

            <div class="chart-container">
                <div class="chart-wrapper tall">
                    <canvas id="toolTrendsChart"></canvas>
                </div>
            </div>

            <div class="insight-box">
                <strong>Market Shift:</strong> CodeRabbit dominated early 2025 (95%+ share in Jan-Feb). By Q4, the market fragmented: Cubic emerged as #2 (347 PRs in Nov), Claude and Cursor saw 10x growth. <strong>Human-directed AI tools</strong> (Claude, Cursor, Copilot) grew from 2% to 35% of monthly usage.
            </div>

            <div class="two-col">
                <div class="chart-container">
                    <h3>Tool Category Over Time</h3>
                    <div class="chart-wrapper">
                        <canvas id="categoryTrendsChart"></canvas>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>Current Tool Market Share</h3>
                    <div class="chart-wrapper">
                        <canvas id="toolShareChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>AI Adoption by Team</h2>
            <p style="color: var(--text-muted); margin-bottom: 1rem;">All 26 teams with 50+ analyzed PRs in 2025, sorted by AI adoption rate.</p>

            <div class="chart-container">
                <div class="chart-wrapper extra-tall">
                    <canvas id="teamAdoptionChart"></canvas>
                </div>
            </div>

            <div class="insight-box">
                <strong>Adoption Range:</strong> AI adoption varies from 0% (Lago) to 87.3% (Plane). High-adoption teams tend to use review bots (CodeRabbit) extensively.
            </div>
        </section>

        <section>
            <h2>AI Impact on Metrics</h2>
            <p style="color: var(--text-muted); margin-bottom: 1rem;">Comparing AI-assisted PRs vs non-AI PRs within each team. Green = AI improved metric, Red = AI increased metric.</p>

            <div class="two-col">
                <div class="chart-container">
                    <h3>Review Time Impact (AI vs Non-AI)</h3>
                    <div class="chart-wrapper tall">
                        <canvas id="reviewImpactChart"></canvas>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>Cycle Time Impact (AI vs Non-AI)</h3>
                    <div class="chart-wrapper tall">
                        <canvas id="cycleImpactChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>Monthly Adoption Trends by Team</h2>
            <div class="chart-container">
                <div class="chart-wrapper tall">
                    <canvas id="monthlyTrendChart"></canvas>
                </div>
            </div>

            <div class="insight-box">
                <strong>Patterns:</strong> Cal.com shows most dramatic growth (0.2% Feb ‚Üí 80.6% Jun). Formbricks shows opposite trend (90% Jan ‚Üí 8% Dec). Teams experiment heavily then settle on sustainable adoption levels.
            </div>
        </section>

        <section>
            <h2>Complete Team Data</h2>

            <div class="download-links">
                <a href="data/team_summary.csv" class="download-btn" download>üìä Team Summary (CSV)</a>
                <a href="data/monthly_trends.csv" class="download-btn" download>üìà Monthly Trends (CSV)</a>
                <a href="data/ai_tools_monthly.csv" class="download-btn" download>üîß AI Tools by Month (CSV)</a>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Team</th>
                        <th>PRs</th>
                        <th>AI %</th>
                        <th>Cycle Œî</th>
                        <th>Review Œî</th>
                        <th>Size Œî</th>
                    </tr>
                </thead>
                <tbody id="teamTableBody">
                </tbody>
            </table>
        </section>

        <!-- DETECTION METHOD COMPARISON - STANDALONE SECTION -->
        <section class="comparison-section">
            <div class="comparison-header">
                <div class="comparison-icon">üî¨</div>
                <div>
                    <h2>Detection Method Comparison</h2>
                    <p style="color: var(--text-muted); margin-top: 0.25rem;">Regex patterns vs LLM semantic analysis ‚Äî validating our AI detection accuracy</p>
                </div>
            </div>

            <!-- Agreement Stats -->
            <div class="comparison-stats">
                <div class="comparison-stat success">
                    <div class="comparison-stat-value" style="color: var(--success);">96.1%</div>
                    <div class="comparison-stat-label">Agreement Rate</div>
                    <div class="agreement-bar">
                        <div class="agreement-bar-fill" style="width: 96.1%; background: var(--success);"></div>
                    </div>
                </div>
                <div class="comparison-stat secondary">
                    <div class="comparison-stat-value" style="color: var(--secondary);">51,800</div>
                    <div class="comparison-stat-label">PRs with Matching Results</div>
                    <div class="comparison-stat-sublabel">Both methods agree</div>
                </div>
                <div class="comparison-stat purple">
                    <div class="comparison-stat-value" style="color: var(--purple);">+1,718</div>
                    <div class="comparison-stat-label">Additional AI PRs Found</div>
                    <div class="comparison-stat-sublabel">LLM catches what regex misses</div>
                </div>
                <div class="comparison-stat">
                    <div class="comparison-stat-value">53,876</div>
                    <div class="comparison-stat-label">PRs Analyzed</div>
                    <div class="comparison-stat-sublabel">89.0% of dataset</div>
                </div>
            </div>

            <!-- Method Cards -->
            <div class="method-cards">
                <div class="method-card">
                    <div class="method-card-header">
                        <div class="method-icon regex">‚ö°</div>
                        <div>
                            <div class="method-card-title">Regex Pattern Detection</div>
                            <div class="method-card-subtitle">25+ patterns ‚Ä¢ Instant ‚Ä¢ Rule-based</div>
                        </div>
                    </div>
                    <div class="method-card-value">10,626</div>
                    <div class="method-card-rate">AI-assisted PRs detected (17.2%)</div>
                    <ul style="margin-top: 1rem; padding-left: 1.25rem; color: var(--text-muted); font-size: 0.85rem;">
                        <li>Exact signature matching</li>
                        <li>Known tool footprints (CodeRabbit, Devin, etc.)</li>
                        <li>Fast, deterministic results</li>
                    </ul>
                </div>

                <div class="method-vs">
                    <div class="method-vs-circle">VS</div>
                </div>

                <div class="method-card">
                    <div class="method-card-header">
                        <div class="method-icon llm">üß†</div>
                        <div>
                            <div class="method-card-title">LLM Semantic Analysis</div>
                            <div class="method-card-subtitle">GPT OSS 20B + Llama 70B fallback ‚Ä¢ Groq Batch API</div>
                        </div>
                    </div>
                    <div class="method-card-value" style="color: var(--purple);">11,540</div>
                    <div class="method-card-rate">AI-assisted PRs detected (21.4%)</div>
                    <ul style="margin-top: 1rem; padding-left: 1.25rem; color: var(--text-muted); font-size: 0.85rem;">
                        <li>Context-aware understanding</li>
                        <li>Catches implicit AI mentions</li>
                        <li>Tool disambiguation (GPT-4 via Cursor ‚Üí Cursor)</li>
                    </ul>
                </div>
            </div>

            <!-- Tool Comparison Table -->
            <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Tool Detection by Method</h3>
            <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">
                Comparing how each method detects specific AI tools. Green delta = LLM finds more; Red delta = Regex finds more (often over-matching).
            </p>

            <table class="tool-comparison-table">
                <thead>
                    <tr>
                        <th>AI Tool</th>
                        <th style="text-align: right;">Regex</th>
                        <th style="text-align: right;">LLM</th>
                        <th style="text-align: right;">Delta</th>
                        <th>Insight</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <span class="tool-name">
                                <span class="tool-dot" style="background: #F97316;"></span>
                                CodeRabbit
                            </span>
                        </td>
                        <td class="mono" style="text-align: right;">5,431</td>
                        <td class="mono" style="text-align: right;">5,891</td>
                        <td style="text-align: right;"><span class="delta-badge positive">+460</span></td>
                        <td style="color: var(--text-muted); font-size: 0.85rem;">LLM catches bot mentions in comments</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="tool-name">
                                <span class="tool-dot" style="background: #eab308;"></span>
                                Devin
                            </span>
                        </td>
                        <td class="mono" style="text-align: right;">1,706</td>
                        <td class="mono" style="text-align: right;">1,743</td>
                        <td style="text-align: right;"><span class="delta-badge positive">+37</span></td>
                        <td style="color: var(--text-muted); font-size: 0.85rem;">Strong pattern coverage</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="tool-name">
                                <span class="tool-dot" style="background: #d97706;"></span>
                                Cubic
                            </span>
                        </td>
                        <td class="mono" style="text-align: right;">1,490</td>
                        <td class="mono" style="text-align: right;">1,590</td>
                        <td style="text-align: right;"><span class="delta-badge positive">+100</span></td>
                        <td style="color: var(--text-muted); font-size: 0.85rem;">LLM understands "cubic" in context</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="tool-name">
                                <span class="tool-dot" style="background: #a855f7;"></span>
                                Claude
                            </span>
                        </td>
                        <td class="mono" style="text-align: right;">412</td>
                        <td class="mono" style="text-align: right;">724</td>
                        <td style="text-align: right;"><span class="delta-badge positive">+312</span></td>
                        <td style="color: var(--text-muted); font-size: 0.85rem;"><strong>+76%</strong> ‚Äî catches indirect refs</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="tool-name">
                                <span class="tool-dot" style="background: #5a9997;"></span>
                                Cursor
                            </span>
                        </td>
                        <td class="mono" style="text-align: right;">499</td>
                        <td class="mono" style="text-align: right;">702</td>
                        <td style="text-align: right;"><span class="delta-badge positive">+203</span></td>
                        <td style="color: var(--text-muted); font-size: 0.85rem;"><strong>+41%</strong> ‚Äî IDE mentions</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="tool-name">
                                <span class="tool-dot" style="background: #60a5fa;"></span>
                                Greptile
                            </span>
                        </td>
                        <td class="mono" style="text-align: right;">7</td>
                        <td class="mono" style="text-align: right;">459</td>
                        <td style="text-align: right;"><span class="delta-badge positive">+452</span></td>
                        <td style="color: var(--text-muted); font-size: 0.85rem;"><strong>65x more!</strong> Regex pattern gap</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="tool-name">
                                <span class="tool-dot" style="background: #22c55e;"></span>
                                Copilot
                            </span>
                        </td>
                        <td class="mono" style="text-align: right;">204</td>
                        <td class="mono" style="text-align: right;">403</td>
                        <td style="text-align: right;"><span class="delta-badge positive">+199</span></td>
                        <td style="color: var(--text-muted); font-size: 0.85rem;"><strong>2x</strong> ‚Äî implicit mentions</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="tool-name">
                                <span class="tool-dot" style="background: #8a8880;"></span>
                                ChatGPT
                            </span>
                        </td>
                        <td class="mono" style="text-align: right;">471</td>
                        <td class="mono" style="text-align: right;">238</td>
                        <td style="text-align: right;"><span class="delta-badge negative">-233</span></td>
                        <td style="color: var(--text-muted); font-size: 0.85rem;">LLM reassigns to specific tools</td>
                    </tr>
                </tbody>
            </table>

            <!-- Key Insights -->
            <div class="key-insight-card">
                <div class="key-insight-header">
                    <span>üí°</span>
                    <span>Key Insights from Method Comparison</span>
                </div>
                <ul class="key-insight-list">
                    <li><strong>96.1% agreement</strong> validates both detection methods produce consistent results</li>
                    <li>LLM catches <strong>1,718 additional AI-assisted PRs</strong> (3.2%) that regex patterns miss entirely</li>
                    <li><strong>Greptile detection improved 65x</strong> ‚Äî major regex pattern gap identified and fixed via LLM feedback</li>
                    <li>LLM correctly reassigns generic "ChatGPT" to specific tools (e.g., "GPT-4 via Cursor" ‚Üí Cursor)</li>
                    <li>Human-directed AI tools (Claude, Cursor, Copilot) have the largest detection gaps ‚Äî developers don't always mention them explicitly</li>
                </ul>
            </div>

            <!-- Per-Team Detection Comparison -->
            <h3 style="margin-top: 2.5rem; margin-bottom: 1rem;">Detection Improvement by Team</h3>
            <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">
                How much more AI usage does LLM detect compared to regex patterns? Positive = LLM finds more, Negative = Regex over-matches.
            </p>

            <div class="chart-container" style="background: var(--bg-card);">
                <div class="chart-wrapper tall">
                    <canvas id="teamDetectionChart"></canvas>
                </div>
            </div>

            <div class="two-col" style="margin-top: 1.5rem;">
                <div class="insight-box" style="background: rgba(34, 197, 94, 0.1); border-color: var(--success);">
                    <strong style="color: var(--success);">Biggest LLM Improvements:</strong>
                    <ul style="margin-top: 0.5rem; padding-left: 1.25rem; font-size: 0.9rem;">
                        <li><strong>Deno</strong> ‚Äî +408% more AI PRs detected</li>
                        <li><strong>Twenty CRM</strong> ‚Äî +360% improvement</li>
                        <li><strong>PostHog</strong> ‚Äî +200% (312 more PRs)</li>
                        <li><strong>Cal.com</strong> ‚Äî +476 additional AI PRs</li>
                    </ul>
                </div>
                <div class="insight-box" style="background: rgba(239, 68, 68, 0.1); border-color: var(--error);">
                    <strong style="color: var(--error);">Regex Over-Matching:</strong>
                    <ul style="margin-top: 0.5rem; padding-left: 1.25rem; font-size: 0.9rem;">
                        <li><strong>Vercel</strong> ‚Äî Regex found 135 more (likely false positives)</li>
                        <li><strong>LangChain</strong> ‚Äî Regex found 50 more</li>
                        <li>LLM more conservative with ambiguous mentions</li>
                    </ul>
                </div>
            </div>

            <p style="color: var(--text-muted); font-size: 0.85rem; margin-top: 1rem; font-style: italic;">
                Note: Teams with low AI usage show high percentage improvements but small absolute numbers.
                High-adoption teams like Plane (87%) show near-parity between methods.
            </p>

            <!-- LLM-to-Regex Feedback Loop -->
            <div class="key-insight-card" style="margin-top: 2rem;">
                <h3>üîÑ LLM-to-Regex Feedback Loop</h3>
                <p>LLM analysis revealed patterns that were then added to regex detection, creating a continuous improvement cycle:</p>
                <ul style="margin: 1rem 0;">
                    <li>LLM detected <code>@lingodotdev</code> mentions ‚Üí added to regex ‚Üí <strong>430 new Replexica detections</strong></li>
                    <li>CodeRabbit author patterns identified ‚Üí <strong>6,884 total detections</strong></li>
                    <li>Gap reduction: 1,717 ‚Üí 1,668 (<strong>-49 PRs, 2.9% improvement</strong>)</li>
                </ul>
                <p style="color: var(--text-muted); font-size: 0.9rem;">This validates an iterative approach: LLM finds edge cases ‚Üí patterns extracted ‚Üí regex updated ‚Üí backfill run.</p>
            </div>
        </section>

        <!-- AI ADOPTION CORRELATIONS -->
        <section class="correlations">
            <h2>AI Adoption Correlations</h2>
            <p style="color: var(--text-muted); margin-bottom: 1.5rem;">
                Analyzing 53,876 LLM-processed PRs to understand where AI tools are used most.
            </p>

            <!-- By PR Type -->
            <h3>By PR Type</h3>
            <div class="chart-container" style="background: var(--bg-card); margin-bottom: 1rem;">
                <div class="chart-wrapper">
                    <canvas id="prTypeChart"></canvas>
                </div>
            </div>
            <div class="insight-box" style="background: rgba(168, 85, 247, 0.1); border-color: var(--purple);">
                <strong>Key Insight:</strong> Refactors show highest AI adoption (32.8%), suggesting developers leverage AI for code restructuring more than greenfield features. CI/CD work shows lowest adoption (9.9%) ‚Äî infrastructure-as-code less suited to current AI tools.
            </div>

            <!-- By Technology Category -->
            <h3 style="margin-top: 2rem;">By Technology Category</h3>
            <div class="chart-container" style="background: var(--bg-card); margin-bottom: 1rem;">
                <div class="chart-wrapper">
                    <canvas id="techCategoryChart"></canvas>
                </div>
            </div>
            <div class="insight-box" style="background: rgba(34, 197, 94, 0.1); border-color: var(--success);">
                <strong>Key Insight:</strong> Mobile development shows highest AI adoption (42.4%), though sample size is smaller (118 PRs). Test-related PRs at 33% suggest AI is heavily used for test generation. DevOps lowest at 15.6%.
            </div>

            <!-- By Programming Language -->
            <h3 style="margin-top: 2rem;">By Programming Language</h3>
            <div class="chart-container" style="background: var(--bg-card); margin-bottom: 1rem;">
                <div class="chart-wrapper tall">
                    <canvas id="languageChart"></canvas>
                </div>
            </div>
            <div class="two-col" style="margin-top: 1rem;">
                <div class="insight-box" style="background: rgba(34, 197, 94, 0.1); border-color: var(--success);">
                    <strong style="color: var(--success);">Highest AI Adoption:</strong>
                    <ul>
                        <li><strong>Ruby</strong> ‚Äî 63.8% (1,758 PRs) ‚ö†Ô∏è</li>
                        <li><strong>HTML</strong> ‚Äî 55.6% (54 PRs)</li>
                        <li><strong>CSS</strong> ‚Äî 41.2% (153 PRs)</li>
                        <li><strong>SQL</strong> ‚Äî 38.6% (321 PRs)</li>
                    </ul>
                </div>
                <div class="insight-box" style="background: rgba(239, 68, 68, 0.1); border-color: var(--error);">
                    <strong style="color: var(--error);">Lowest AI Adoption:</strong>
                    <ul>
                        <li><strong>C</strong> ‚Äî 0.0% (184 PRs)</li>
                        <li><strong>Elixir</strong> ‚Äî 0.9% (327 PRs)</li>
                        <li><strong>Rust</strong> ‚Äî 2.4% (2,740 PRs) ‚úì</li>
                        <li><strong>HCL</strong> ‚Äî 4.7% (491 PRs)</li>
                    </ul>
                </div>
            </div>
            <div class="insight-box" style="background: rgba(249, 115, 22, 0.1); border-color: var(--primary); margin-top: 1rem;">
                <strong>‚ö†Ô∏è Caveat ‚Äî Team Confounding:</strong> Language correlations are influenced by team culture. Ruby's 63.8% is driven by Antiwork (93% of Ruby PRs, 65.7% AI adoption). TypeScript varies wildly: Plane 87%, Antiwork 61%, Vercel 2.5%. <strong>Rust is more reliable</strong> ‚Äî consistently low across multiple teams (Neon 1.1%, Deno 3.5%, PostHog 4.0%).
            </div>

            <!-- By Framework -->
            <h3 style="margin-top: 2rem;">By Framework</h3>
            <div class="chart-container" style="background: var(--bg-card); margin-bottom: 1rem;">
                <div class="chart-wrapper tall">
                    <canvas id="frameworkChart"></canvas>
                </div>
            </div>
            <div class="two-col" style="margin-top: 1rem;">
                <div class="insight-box" style="background: rgba(34, 197, 94, 0.1); border-color: var(--success);">
                    <strong style="color: var(--success);">Highest AI Adoption:</strong>
                    <ul>
                        <li><strong>Rails</strong> ‚Äî 64.4% (1,617 PRs)</li>
                        <li><strong>tRPC</strong> ‚Äî 58.8% (767 PRs)</li>
                        <li><strong>Playwright</strong> ‚Äî 50.5% (210 PRs)</li>
                        <li><strong>Prisma</strong> ‚Äî 50.4% (395 PRs)</li>
                        <li><strong>Django</strong> ‚Äî 44.9% (693 PRs)</li>
                    </ul>
                </div>
                <div class="insight-box" style="background: rgba(239, 68, 68, 0.1); border-color: var(--error);">
                    <strong style="color: var(--error);">Lowest AI Adoption:</strong>
                    <ul>
                        <li><strong>Svelte</strong> ‚Äî 0.4% (233 PRs)</li>
                        <li><strong>Hono</strong> ‚Äî 0.7% (276 PRs)</li>
                        <li><strong>Nuxt</strong> ‚Äî 1.2% (242 PRs)</li>
                        <li><strong>Remix</strong> ‚Äî 3.9% (233 PRs)</li>
                        <li><strong>FastAPI</strong> ‚Äî 5.3% (623 PRs)</li>
                    </ul>
                </div>
            </div>

            <!-- By PR Size -->
            <h3 style="margin-top: 2rem;">By PR Size</h3>
            <div class="chart-container" style="background: var(--bg-card); margin-bottom: 1rem;">
                <div class="chart-wrapper">
                    <canvas id="prSizeChart"></canvas>
                </div>
            </div>
            <div class="insight-box" style="background: rgba(249, 115, 22, 0.1); border-color: var(--primary);">
                <strong>Key Insight:</strong> Larger PRs correlate with higher AI usage ‚Äî XL PRs (501+ lines) show 26.0% AI adoption vs 17.8% for XS PRs (0-10 lines). This is a <strong>46% relative increase</strong>. AI tools may enable developers to tackle larger changes confidently, or larger changes benefit more from AI assistance.
            </div>

            <!-- By Team Structure -->
            <h3 style="margin-top: 2rem;">By Team Structure</h3>
            <p style="color: var(--text-muted); margin-bottom: 1rem;">
                Does team composition affect AI adoption? We measured "concentration" ‚Äî what % of PRs come from the top 5 contributors.
            </p>
            <div class="chart-container" style="background: var(--bg-card); margin-bottom: 1rem;">
                <div class="chart-wrapper">
                    <canvas id="teamStructureChart"></canvas>
                </div>
            </div>
            <div class="two-col" style="margin-top: 1rem;">
                <div class="insight-box" style="background: rgba(34, 197, 94, 0.1); border-color: var(--success);">
                    <strong>Focused Teams (70%+ concentration):</strong>
                    <ul>
                        <li>Dub ‚Äî 94.3% concentration, <strong>83.9% AI</strong></li>
                        <li>Trigger.dev ‚Äî 76.0%, <strong>45.7% AI</strong></li>
                        <li>Formbricks ‚Äî 70.3%, <strong>50.5% AI</strong></li>
                    </ul>
                    <p style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.5rem;">~66 contributors avg, 29.2% AI adoption</p>
                </div>
                <div class="insight-box" style="background: rgba(99, 102, 241, 0.1); border-color: var(--indigo);">
                    <strong>Distributed Teams (&lt;40% concentration):</strong>
                    <ul>
                        <li>PostHog ‚Äî 18.7% concentration, <strong>7.5% AI</strong></li>
                        <li>LangChain ‚Äî 30.5%, <strong>4.2% AI</strong></li>
                        <li>Supabase ‚Äî 31.5%, <strong>12.0% AI</strong></li>
                    </ul>
                    <p style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.5rem;">~452 contributors avg, 19.2% AI adoption</p>
                </div>
            </div>
            <div class="insight-box" style="background: rgba(249, 115, 22, 0.1); border-color: var(--primary); margin-top: 1rem;">
                <strong>Key Insight:</strong> Focused teams show <strong>52% higher AI adoption</strong> (29.2% vs 19.2%) than distributed open-source projects. Core teams can establish AI tool workflows, share knowledge, and standardize practices. Large contributor bases with occasional contributors have less consistent tooling.
            </div>

            <!-- Recommendation -->
            <div class="key-insight-card" style="margin-top: 2.5rem; border-left: 4px solid var(--success);">
                <h3>üí° Recommendation: Explicit AI Disclosure in PRs</h3>
                <p>Teams with high AI detection rates (like Antiwork at 61.7%) often have a culture of <strong>explicit AI disclosure</strong> in PR descriptions:</p>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; margin: 1rem 0; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">
                    <code style="color: var(--text-muted);">## AI Usage</code><br>
                    <code>- Used Claude to scaffold the initial component structure</code><br>
                    <code>- Copilot assisted with test generation</code><br>
                    <code>- Cursor for refactoring the API layer</code>
                </div>
                <p><strong>Benefits for Engineering Leaders:</strong></p>
                <ul style="margin: 0.5rem 0;">
                    <li><strong>Accurate measurement</strong> ‚Äî Know the true AI adoption rate across your team</li>
                    <li><strong>Knowledge sharing</strong> ‚Äî Team members learn which tools work for which tasks</li>
                    <li><strong>Quality insights</strong> ‚Äî Correlate AI usage with review feedback and bug rates</li>
                    <li><strong>Onboarding</strong> ‚Äî New hires learn team AI practices from PR history</li>
                </ul>
                <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 1rem;">
                    Consider adding an "AI Usage" section to your PR template. Even "No AI used" is valuable data.
                </p>
            </div>
        </section>

        <!-- METHODOLOGY - SIMPLIFIED -->
        <section class="methodology">
            <h2>Methodology</h2>

            <div class="two-col" style="margin: 1.5rem 0;">
                <div>
                    <h3>Data Collection</h3>
                    <ul>
                        <li><strong>Source:</strong> GitHub GraphQL API with authenticated access</li>
                        <li><strong>Teams:</strong> 26 open source project teams</li>
                        <li><strong>Date Range:</strong> January 1 - December 25, 2025</li>
                        <li><strong>PR Fields:</strong> Title, body, comments, commits, reviews, files</li>
                    </ul>
                </div>
                <div>
                    <h3>Metrics Definitions</h3>
                    <ul>
                        <li><strong>Cycle Time:</strong> Hours from PR creation to merge</li>
                        <li><strong>Review Time:</strong> Hours from PR creation to first review</li>
                        <li><strong>PR Size:</strong> Total lines added + deleted</li>
                        <li><strong>Impact Delta:</strong> (AI metric - Non-AI metric) / Non-AI √ó 100</li>
                    </ul>
                </div>
            </div>

            <div class="two-col" style="margin: 1.5rem 0;">
                <div>
                    <h3>AI Detection Methods</h3>
                    <ul>
                        <li><strong>LLM Detection:</strong> Groq Batch API ‚Äî GPT OSS 20B primary, Llama 3.3 70B fallback for failures</li>
                        <li><strong>Pattern Detection:</strong> 25+ regex patterns for known AI signatures</li>
                        <li><strong>Tool Attribution:</strong> Extracted from PR descriptions, commits, comments</li>
                        <li><strong>Scope:</strong> Metadata only ‚Äî file contents not analyzed</li>
                    </ul>
                </div>
                <div>
                    <h3>Data Quality</h3>
                    <ul>
                        <li><strong>Total PRs:</strong> 60,545</li>
                        <li><strong>LLM Analyzed:</strong> 53,876 (89.0%)</li>
                        <li><strong>Empty Body PRs:</strong> 6,669 (11%) ‚Äî excluded from LLM</li>
                        <li><strong>Teams with 50+ PRs:</strong> 26</li>
                    </ul>
                </div>
            </div>
        </section>

        <footer>
            <div class="logo">tformance</div>
            <p>AI Impact Analytics for Engineering Teams</p>
            <p style="margin-top: 0.5rem;">¬© 2025 tformance. Data sourced from public GitHub repositories.</p>
        </footer>
    </div>

    <script>
        // Register datalabels plugin
        Chart.register(ChartDataLabels);

        // Theme management
        function getSystemTheme() {
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function getCurrentTheme() {
            return document.documentElement.getAttribute('data-theme') || getSystemTheme();
        }

        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            document.getElementById('theme-icon').textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            document.getElementById('theme-label').textContent = theme === 'dark' ? 'Light' : 'Dark';
            updateChartColors();
        }

        function toggleTheme() {
            const currentTheme = getCurrentTheme();
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        }

        // Listen for system theme changes (only applies if no manual preference)
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                applyTheme(e.matches ? 'dark' : 'light');
            }
        });

        // Initialize theme UI on page load
        document.addEventListener('DOMContentLoaded', () => {
            applyTheme(getCurrentTheme());
        });

        function getColors() {
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            return {
                primary: '#F97316',
                secondary: '#5a9997',
                success: '#22c55e',
                warning: '#eab308',
                error: '#ef4444',
                purple: '#a855f7',
                text: isDark ? '#ccc9c0' : '#1f2937',
                muted: isDark ? '#8a8880' : '#6b7280',
                grid: isDark ? '#3c3c3a' : '#e5e7eb'
            };
        }

        let charts = {};

        function updateChartColors() {
            const colors = getColors();
            Object.values(charts).forEach(chart => {
                if (chart.options.scales) {
                    if (chart.options.scales.x) {
                        chart.options.scales.x.ticks.color = colors.text;
                        chart.options.scales.x.grid.color = colors.grid;
                    }
                    if (chart.options.scales.y) {
                        chart.options.scales.y.ticks.color = colors.text;
                        chart.options.scales.y.grid.color = colors.grid;
                    }
                }
                if (chart.options.plugins && chart.options.plugins.legend) {
                    chart.options.plugins.legend.labels.color = colors.text;
                }
                if (chart.options.plugins && chart.options.plugins.title) {
                    chart.options.plugins.title.color = colors.text;
                }
                chart.update();
            });
        }

        // Team data
        const teamData = [
            {"team": "Plane", "total": 1698, "ai_pct": 87.3, "cycle_delta": 185.4, "review_delta": 2.2, "size_delta": -80.3},
            {"team": "Dub", "total": 895, "ai_pct": 83.9, "cycle_delta": 55.9, "review_delta": -12.3, "size_delta": -35.8},
            {"team": "Antiwork", "total": 3964, "ai_pct": 61.9, "cycle_delta": -8.5, "review_delta": -50.2, "size_delta": -11.8},
            {"team": "Formbricks", "total": 1661, "ai_pct": 50.5, "cycle_delta": 40.9, "review_delta": -26.3, "size_delta": -18.0},
            {"team": "Trigger.dev", "total": 827, "ai_pct": 45.6, "cycle_delta": -38.2, "review_delta": -71.7, "size_delta": 10.2},
            {"team": "Cal.com", "total": 5565, "ai_pct": 41.6, "cycle_delta": 40.2, "review_delta": -2.4, "size_delta": 76.3},
            {"team": "Resend", "total": 888, "ai_pct": 40.4, "cycle_delta": -72.0, "review_delta": -96.3, "size_delta": -62.9},
            {"team": "Gumroad", "total": 220, "ai_pct": 29.5, "cycle_delta": 10.5, "review_delta": -51.8, "size_delta": 549.3},
            {"team": "Infisical", "total": 1677, "ai_pct": 24.2, "cycle_delta": 50.3, "review_delta": 64.0, "size_delta": -37.3},
            {"team": "Anthropic", "total": 233, "ai_pct": 22.7, "cycle_delta": -90.2, "review_delta": -87.1, "size_delta": 66.6},
            {"team": "Hoppscotch", "total": 434, "ai_pct": 17.3, "cycle_delta": -27.0, "review_delta": -6.7, "size_delta": 46.9},
            {"team": "Novu", "total": 2155, "ai_pct": 17.2, "cycle_delta": -47.1, "review_delta": -52.6, "size_delta": -28.5},
            {"team": "Coolify", "total": 1158, "ai_pct": 13.6, "cycle_delta": -83.7, "review_delta": -89.8, "size_delta": -43.6},
            {"team": "Comp AI", "total": 1636, "ai_pct": 13.5, "cycle_delta": -79.7, "review_delta": -87.8, "size_delta": -3.9},
            {"team": "Supabase", "total": 2758, "ai_pct": 12.0, "cycle_delta": 61.9, "review_delta": 52.0, "size_delta": -80.2},
            {"team": "PostHog", "total": 6188, "ai_pct": 6.8, "cycle_delta": 34.8, "review_delta": -49.4, "size_delta": -21.3},
            {"team": "Twenty CRM", "total": 4590, "ai_pct": 5.7, "cycle_delta": 68.7, "review_delta": -0.6, "size_delta": 25.3},
            {"team": "Polar.sh", "total": 2011, "ai_pct": 5.0, "cycle_delta": -75.7, "review_delta": -92.3, "size_delta": -67.5},
            {"team": "LangChain", "total": 3878, "ai_pct": 4.2, "cycle_delta": 80.3, "review_delta": -16.2, "size_delta": -37.0},
            {"team": "Documenso", "total": 415, "ai_pct": 3.9, "cycle_delta": 36.5, "review_delta": 138.7, "size_delta": -22.0},
            {"team": "Deno", "total": 2214, "ai_pct": 2.9, "cycle_delta": 91.0, "review_delta": -3.2, "size_delta": -77.0},
            {"team": "Vercel", "total": 5487, "ai_pct": 2.1, "cycle_delta": 21.7, "review_delta": 29.5, "size_delta": 14.0},
            {"team": "Linear", "total": 246, "ai_pct": 2.0, "cycle_delta": -80.9, "review_delta": -99.2, "size_delta": -98.3},
            {"team": "FastAPI", "total": 783, "ai_pct": 1.7, "cycle_delta": -33.9, "review_delta": -64.9, "size_delta": 445.6},
            {"team": "Neon", "total": 1988, "ai_pct": 0.9, "cycle_delta": 105.3, "review_delta": 63.9, "size_delta": 216.4},
            {"team": "Lago", "total": 121, "ai_pct": 0.0, "cycle_delta": null, "review_delta": null, "size_delta": null}
        ];

        // Tool trends data
        const toolTrends = {
            "2025-01": {"coderabbit": 272, "chatgpt": 5, "greptile": 5, "copilot": 4, "cursor": 2, "claude": 0, "devin": 0, "cubic": 0},
            "2025-02": {"coderabbit": 325, "greptile": 26, "chatgpt": 5, "cursor": 2, "copilot": 2, "claude": 0, "devin": 0, "cubic": 0},
            "2025-03": {"coderabbit": 560, "devin": 73, "greptile": 16, "chatgpt": 6, "claude": 5, "copilot": 3, "cursor": 0, "cubic": 0},
            "2025-04": {"coderabbit": 567, "devin": 178, "greptile": 17, "copilot": 13, "chatgpt": 6, "claude": 5, "cursor": 0, "cubic": 0},
            "2025-05": {"coderabbit": 467, "devin": 222, "cubic": 130, "greptile": 28, "copilot": 15, "claude": 4, "cursor": 0, "chatgpt": 0},
            "2025-06": {"coderabbit": 611, "cubic": 263, "devin": 195, "greptile": 28, "claude": 22, "cursor": 18, "copilot": 0, "chatgpt": 0},
            "2025-07": {"coderabbit": 866, "devin": 301, "cubic": 149, "greptile": 53, "copilot": 34, "cursor": 30, "claude": 0, "chatgpt": 0},
            "2025-08": {"coderabbit": 787, "devin": 215, "cursor": 64, "greptile": 52, "claude": 45, "copilot": 31, "cubic": 0, "chatgpt": 0},
            "2025-09": {"coderabbit": 289, "devin": 184, "cursor": 98, "claude": 79, "cubic": 68, "greptile": 62, "copilot": 0, "chatgpt": 0},
            "2025-10": {"coderabbit": 298, "cubic": 295, "claude": 159, "cursor": 157, "devin": 104, "copilot": 74, "greptile": 0, "chatgpt": 0},
            "2025-11": {"cubic": 347, "coderabbit": 307, "cursor": 150, "claude": 123, "devin": 122, "copilot": 72, "greptile": 0, "chatgpt": 0},
            "2025-12": {"coderabbit": 528, "cubic": 302, "claude": 249, "cursor": 172, "devin": 141, "copilot": 94, "greptile": 0, "chatgpt": 0}
        };

        const colors = getColors();
        const months = Object.keys(toolTrends);
        const toolColors = {
            'coderabbit': '#F97316',
            'devin': '#eab308',
            'cubic': '#d97706',
            'claude': '#a855f7',
            'cursor': '#5a9997',
            'copilot': '#22c55e',
            'greptile': '#60a5fa',
            'chatgpt': '#8a8880'
        };

        // Tool Trends Chart
        charts.toolTrends = new Chart(document.getElementById('toolTrendsChart'), {
            type: 'line',
            data: {
                labels: months.map(m => m.substring(5)),
                datasets: ['coderabbit', 'devin', 'cubic', 'claude', 'cursor', 'copilot'].map(tool => ({
                    label: tool.charAt(0).toUpperCase() + tool.slice(1),
                    data: months.map(m => toolTrends[m][tool] || 0),
                    borderColor: toolColors[tool],
                    backgroundColor: 'transparent',
                    tension: 0.4,
                    pointRadius: 4
                }))
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { labels: { color: colors.text } },
                    title: { display: true, text: 'AI Tool Usage by Month (PRs)', color: colors.text },
                    datalabels: { display: false }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { ticks: { color: colors.text }, grid: { color: colors.grid }, title: { display: true, text: 'PRs per Month', color: colors.text } }
                }
            }
        });

        // Category Trends Chart
        const categoryData = months.map(m => {
            const d = toolTrends[m];
            return {
                bots: d.coderabbit + (d.greptile || 0),
                agents: d.devin + d.cubic,
                human: d.claude + d.cursor + d.copilot + (d.chatgpt || 0)
            };
        });

        charts.categoryTrends = new Chart(document.getElementById('categoryTrendsChart'), {
            type: 'bar',
            data: {
                labels: months.map(m => m.substring(5)),
                datasets: [
                    { label: 'Review Bots', data: categoryData.map(d => d.bots), backgroundColor: '#F97316', stack: 'stack' },
                    { label: 'Autonomous Agents', data: categoryData.map(d => d.agents), backgroundColor: '#eab308', stack: 'stack' },
                    { label: 'Human-Directed AI', data: categoryData.map(d => d.human), backgroundColor: '#5a9997', stack: 'stack' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { labels: { color: colors.text } },
                    datalabels: { display: false }
                },
                scales: {
                    x: { stacked: true, ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { stacked: true, ticks: { color: colors.text }, grid: { color: colors.grid } }
                }
            }
        });

        // Tool Market Share (current)
        charts.toolShare = new Chart(document.getElementById('toolShareChart'), {
            type: 'doughnut',
            data: {
                labels: ['CodeRabbit', 'Devin', 'Cubic', 'Claude', 'Cursor', 'Copilot'],
                datasets: [{
                    data: [53.5, 17.9, 12.8, 4.9, 4.7, 2.0],
                    backgroundColor: [toolColors.coderabbit, toolColors.devin, toolColors.cubic, toolColors.claude, toolColors.cursor, toolColors.copilot]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'right', labels: { color: colors.text } },
                    title: { display: true, text: 'Overall Tool Share (2025)', color: colors.text },
                    datalabels: { display: false }
                }
            }
        });

        // Team Adoption Chart
        const sortedTeams = [...teamData].sort((a, b) => b.ai_pct - a.ai_pct);
        charts.teamAdoption = new Chart(document.getElementById('teamAdoptionChart'), {
            type: 'bar',
            data: {
                labels: sortedTeams.map(t => t.team),
                datasets: [{
                    label: 'AI Adoption %',
                    data: sortedTeams.map(t => t.ai_pct),
                    backgroundColor: sortedTeams.map(t =>
                        t.ai_pct > 50 ? '#F97316' :
                        t.ai_pct > 20 ? '#eab308' :
                        t.ai_pct > 5 ? '#5a9997' : '#8a8880'
                    ),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: {
                        anchor: 'end',
                        align: 'end',
                        color: colors.text,
                        font: { family: "'JetBrains Mono', monospace", size: 10 },
                        formatter: (v) => v > 0 ? v.toFixed(1) + '%' : ''
                    }
                },
                scales: {
                    x: { max: 100, ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { ticks: { color: colors.text, font: { size: 11 } }, grid: { display: false } }
                }
            }
        });

        // Review Impact Chart
        const reviewData = teamData.filter(t => t.review_delta !== null).sort((a, b) => a.review_delta - b.review_delta).slice(0, 15);
        charts.reviewImpact = new Chart(document.getElementById('reviewImpactChart'), {
            type: 'bar',
            data: {
                labels: reviewData.map(t => t.team),
                datasets: [{
                    label: 'Review Time Change %',
                    data: reviewData.map(t => t.review_delta),
                    backgroundColor: reviewData.map(t => t.review_delta < 0 ? '#22c55e' : '#ef4444'),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: {
                        anchor: 'end',
                        align: (ctx) => ctx.dataset.data[ctx.dataIndex] < 0 ? 'start' : 'end',
                        color: colors.text,
                        font: { family: "'JetBrains Mono', monospace", size: 10 },
                        formatter: (v) => (v > 0 ? '+' : '') + v.toFixed(0) + '%'
                    }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { ticks: { color: colors.text, font: { size: 10 } }, grid: { display: false } }
                }
            }
        });

        // Cycle Impact Chart
        const cycleData = teamData.filter(t => t.cycle_delta !== null).sort((a, b) => a.cycle_delta - b.cycle_delta).slice(0, 15);
        charts.cycleImpact = new Chart(document.getElementById('cycleImpactChart'), {
            type: 'bar',
            data: {
                labels: cycleData.map(t => t.team),
                datasets: [{
                    label: 'Cycle Time Change %',
                    data: cycleData.map(t => t.cycle_delta),
                    backgroundColor: cycleData.map(t => t.cycle_delta < 0 ? '#22c55e' : '#ef4444'),
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: {
                        anchor: 'end',
                        align: (ctx) => ctx.dataset.data[ctx.dataIndex] < 0 ? 'start' : 'end',
                        color: colors.text,
                        font: { family: "'JetBrains Mono', monospace", size: 10 },
                        formatter: (v) => (v > 0 ? '+' : '') + v.toFixed(0) + '%'
                    }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { ticks: { color: colors.text, font: { size: 10 } }, grid: { display: false } }
                }
            }
        });

        // Monthly Team Trends Chart
        charts.monthlyTrend = new Chart(document.getElementById('monthlyTrendChart'), {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [
                    {
                        label: 'Antiwork',
                        data: [null, null, 42.7, 32.4, 76.2, 96.4, 97.1, 70.9, 34.9, 42.2, 50.3, 59.1],
                        borderColor: '#F97316',
                        backgroundColor: 'transparent',
                        tension: 0.4,
                        pointRadius: 4
                    },
                    {
                        label: 'Cal.com',
                        data: [7.7, 0.2, 1.2, 14.9, 46.9, 80.6, 75.3, 73.3, 26.5, 52.7, 72.9, 65.7],
                        borderColor: '#5a9997',
                        backgroundColor: 'transparent',
                        tension: 0.4,
                        pointRadius: 4
                    },
                    {
                        label: 'Plane',
                        data: [75.1, 92.3, 93.0, 93.9, 92.8, 85.0, 86.0, 92.9, 87.2, 91.3, 93.8, 79.8],
                        borderColor: '#eab308',
                        backgroundColor: 'transparent',
                        tension: 0.4,
                        pointRadius: 4
                    },
                    {
                        label: 'Formbricks',
                        data: [90.5, 89.3, 58.7, 47.6, 67.0, 86.5, 84.1, 20.6, 11.7, 8.0, 13.8, 8.2],
                        borderColor: '#a855f7',
                        backgroundColor: 'transparent',
                        tension: 0.4,
                        pointRadius: 4
                    },
                    {
                        label: 'PostHog',
                        data: [1.2, 2.4, 1.8, 1.0, 1.4, 1.0, 6.2, 10.2, 10.8, 11.0, 9.7, 8.7],
                        borderColor: '#22c55e',
                        backgroundColor: 'transparent',
                        tension: 0.4,
                        pointRadius: 4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { labels: { color: colors.text } },
                    title: { display: true, text: 'AI Adoption Over 2025', color: colors.text },
                    datalabels: { display: false }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { ticks: { color: colors.text }, grid: { color: colors.grid }, title: { display: true, text: 'AI Adoption %', color: colors.text } }
                }
            }
        });

        // Team Detection Comparison: LLM vs Regex
        const teamDetectionData = [
            { team: 'Cal.com', llm: 2336, regex: 1860, delta: 476, pctChange: 25.6 },
            { team: 'PostHog', llm: 468, regex: 156, delta: 312, pctChange: 200.0 },
            { team: 'Twenty CRM', llm: 267, regex: 58, delta: 209, pctChange: 360.3 },
            { team: 'Deno', llm: 66, regex: 13, delta: 53, pctChange: 407.7 },
            { team: 'Antiwork', llm: 2473, regex: 2429, delta: 44, pctChange: 1.8 },
            { team: 'Neon', llm: 71, regex: 36, delta: 35, pctChange: 97.2 },
            { team: 'Polar.sh', llm: 295, regex: 265, delta: 30, pctChange: 11.3 },
            { team: 'Plane', llm: 1318, regex: 1322, delta: -4, pctChange: -0.3 },
            { team: 'Trigger.dev', llm: 217, regex: 238, delta: -21, pctChange: -8.8 },
            { team: 'LangChain', llm: 164, regex: 214, delta: -50, pctChange: -23.4 },
            { team: 'Vercel', llm: 114, regex: 249, delta: -135, pctChange: -54.2 }
        ];

        charts.teamDetection = new Chart(document.getElementById('teamDetectionChart'), {
            type: 'bar',
            data: {
                labels: teamDetectionData.map(t => t.team),
                datasets: [{
                    label: 'LLM Improvement (+) / Regex Over-Match (-)',
                    data: teamDetectionData.map(t => t.delta),
                    backgroundColor: teamDetectionData.map(t =>
                        t.delta > 0 ? 'rgba(34, 197, 94, 0.8)' : 'rgba(239, 68, 68, 0.8)'
                    ),
                    borderColor: teamDetectionData.map(t =>
                        t.delta > 0 ? '#22c55e' : '#ef4444'
                    ),
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: {
                        display: true,
                        text: 'Additional AI PRs Detected: LLM vs Regex',
                        color: colors.text,
                        font: { size: 14 }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(ctx) {
                                const t = teamDetectionData[ctx.dataIndex];
                                const sign = t.delta > 0 ? '+' : '';
                                return [
                                    `Delta: ${sign}${t.delta} PRs (${sign}${t.pctChange.toFixed(1)}%)`,
                                    `LLM: ${t.llm} AI PRs`,
                                    `Regex: ${t.regex} AI PRs`
                                ];
                            }
                        }
                    },
                    datalabels: {
                        display: true,
                        anchor: function(ctx) {
                            return teamDetectionData[ctx.dataIndex].delta >= 0 ? 'end' : 'start';
                        },
                        align: function(ctx) {
                            return teamDetectionData[ctx.dataIndex].delta >= 0 ? 'right' : 'left';
                        },
                        color: colors.text,
                        font: { weight: 'bold', size: 11 },
                        formatter: function(value, ctx) {
                            const t = teamDetectionData[ctx.dataIndex];
                            const sign = value > 0 ? '+' : '';
                            return `${sign}${value} (${sign}${t.pctChange.toFixed(0)}%)`;
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: { color: colors.text },
                        grid: { color: colors.grid },
                        title: { display: true, text: 'Additional AI PRs Detected', color: colors.text }
                    },
                    y: {
                        ticks: { color: colors.text },
                        grid: { color: colors.grid }
                    }
                }
            }
        });

        // PR Type Chart
        const prTypeData = [
            { type: 'Refactor', prs: 4129, ai_pct: 32.8 },
            { type: 'Feature', prs: 14264, ai_pct: 26.7 },
            { type: 'Test', prs: 647, ai_pct: 23.6 },
            { type: 'Bugfix', prs: 16803, ai_pct: 22.3 },
            { type: 'Improvement', prs: 266, ai_pct: 16.5 },
            { type: 'Docs', prs: 5689, ai_pct: 13.2 },
            { type: 'Chore', prs: 10820, ai_pct: 12.9 },
            { type: 'CI', prs: 705, ai_pct: 9.9 }
        ];

        charts.prType = new Chart(document.getElementById('prTypeChart'), {
            type: 'bar',
            data: {
                labels: prTypeData.map(d => d.type),
                datasets: [{
                    label: 'AI Adoption %',
                    data: prTypeData.map(d => d.ai_pct),
                    backgroundColor: 'rgba(168, 85, 247, 0.7)',
                    borderColor: '#a855f7',
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: 'AI Adoption by PR Type', color: colors.text },
                    datalabels: {
                        display: true,
                        anchor: 'end',
                        align: 'top',
                        color: colors.text,
                        font: { weight: 'bold' },
                        formatter: (v) => v.toFixed(1) + '%'
                    }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { ticks: { color: colors.text }, grid: { color: colors.grid }, max: 40 }
                }
            }
        });

        // Tech Category Chart
        const techCategoryData = [
            { tech: 'Mobile', prs: 118, ai_pct: 42.4 },
            { tech: 'Test', prs: 697, ai_pct: 33.0 },
            { tech: 'Frontend', prs: 26848, ai_pct: 27.6 },
            { tech: 'Docs', prs: 440, ai_pct: 26.8 },
            { tech: 'Backend', prs: 26318, ai_pct: 20.8 },
            { tech: 'Data', prs: 754, ai_pct: 17.9 },
            { tech: 'DevOps', prs: 8457, ai_pct: 15.6 }
        ];

        charts.techCategory = new Chart(document.getElementById('techCategoryChart'), {
            type: 'bar',
            data: {
                labels: techCategoryData.map(d => d.tech),
                datasets: [{
                    label: 'AI Adoption %',
                    data: techCategoryData.map(d => d.ai_pct),
                    backgroundColor: 'rgba(34, 197, 94, 0.7)',
                    borderColor: '#22c55e',
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: 'AI Adoption by Technology Category', color: colors.text },
                    datalabels: {
                        display: true,
                        anchor: 'end',
                        align: 'top',
                        color: colors.text,
                        font: { weight: 'bold' },
                        formatter: (v) => v.toFixed(1) + '%'
                    }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { ticks: { color: colors.text }, grid: { color: colors.grid }, max: 50 }
                }
            }
        });

        // Language Chart (horizontal bar)
        const languageData = [
            { lang: 'Ruby', prs: 1758, ai_pct: 63.8 },
            { lang: 'HTML', prs: 54, ai_pct: 55.6 },
            { lang: 'CSS', prs: 153, ai_pct: 41.2 },
            { lang: 'SQL', prs: 321, ai_pct: 38.6 },
            { lang: 'SCSS', prs: 68, ai_pct: 35.3 },
            { lang: 'Bash', prs: 98, ai_pct: 31.6 },
            { lang: 'Go', prs: 180, ai_pct: 28.3 },
            { lang: 'JSON', prs: 308, ai_pct: 27.3 },
            { lang: 'TypeScript', prs: 32885, ai_pct: 26.0 },
            { lang: 'Markdown', prs: 609, ai_pct: 21.2 },
            { lang: 'JavaScript', prs: 16161, ai_pct: 19.8 },
            { lang: 'PHP', prs: 698, ai_pct: 19.5 },
            { lang: 'YAML', prs: 1238, ai_pct: 16.0 },
            { lang: 'Python', prs: 6868, ai_pct: 10.9 },
            { lang: 'MDX', prs: 1370, ai_pct: 10.4 },
            { lang: 'HCL', prs: 491, ai_pct: 4.7 },
            { lang: 'Rust', prs: 2740, ai_pct: 2.4 },
            { lang: 'Elixir', prs: 327, ai_pct: 0.9 },
            { lang: 'C', prs: 184, ai_pct: 0.0 }
        ];

        charts.language = new Chart(document.getElementById('languageChart'), {
            type: 'bar',
            data: {
                labels: languageData.map(d => d.lang),
                datasets: [{
                    label: 'AI Adoption %',
                    data: languageData.map(d => d.ai_pct),
                    backgroundColor: languageData.map(d =>
                        d.ai_pct > 30 ? 'rgba(34, 197, 94, 0.7)' :
                        d.ai_pct > 10 ? 'rgba(234, 179, 8, 0.7)' :
                        'rgba(239, 68, 68, 0.7)'
                    ),
                    borderColor: languageData.map(d =>
                        d.ai_pct > 30 ? '#22c55e' :
                        d.ai_pct > 10 ? '#eab308' :
                        '#ef4444'
                    ),
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: 'AI Adoption by Programming Language', color: colors.text },
                    tooltip: {
                        callbacks: {
                            label: (ctx) => {
                                const d = languageData[ctx.dataIndex];
                                return `${d.ai_pct}% AI (${d.prs.toLocaleString()} PRs)`;
                            }
                        }
                    },
                    datalabels: {
                        display: true,
                        anchor: 'end',
                        align: 'right',
                        color: colors.text,
                        font: { size: 10 },
                        formatter: (v) => v.toFixed(1) + '%'
                    }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid }, max: 70 },
                    y: { ticks: { color: colors.text, font: { size: 11 } }, grid: { color: colors.grid } }
                }
            }
        });

        // Framework Chart (horizontal bar)
        const frameworkData = [
            { fw: 'Rails', prs: 1617, ai_pct: 64.4 },
            { fw: 'tRPC', prs: 767, ai_pct: 58.8 },
            { fw: 'Playwright', prs: 210, ai_pct: 50.5 },
            { fw: 'Prisma', prs: 395, ai_pct: 50.4 },
            { fw: 'Django', prs: 693, ai_pct: 44.9 },
            { fw: 'Next.js', prs: 8336, ai_pct: 36.3 },
            { fw: 'React', prs: 19103, ai_pct: 31.2 },
            { fw: 'NestJS', prs: 394, ai_pct: 28.2 },
            { fw: 'Livewire', prs: 234, ai_pct: 26.9 },
            { fw: 'Laravel', prs: 607, ai_pct: 21.1 },
            { fw: 'Express', prs: 964, ai_pct: 19.5 },
            { fw: 'Vue', prs: 436, ai_pct: 11.5 },
            { fw: 'LangChain', prs: 405, ai_pct: 11.1 },
            { fw: 'GraphQL', prs: 208, ai_pct: 11.1 },
            { fw: 'FastAPI', prs: 623, ai_pct: 5.3 },
            { fw: 'Fastify', prs: 268, ai_pct: 5.2 },
            { fw: 'Remix', prs: 233, ai_pct: 3.9 },
            { fw: 'Nuxt', prs: 242, ai_pct: 1.2 },
            { fw: 'Hono', prs: 276, ai_pct: 0.7 },
            { fw: 'Svelte', prs: 233, ai_pct: 0.4 }
        ];

        charts.framework = new Chart(document.getElementById('frameworkChart'), {
            type: 'bar',
            data: {
                labels: frameworkData.map(d => d.fw),
                datasets: [{
                    label: 'AI Adoption %',
                    data: frameworkData.map(d => d.ai_pct),
                    backgroundColor: frameworkData.map(d =>
                        d.ai_pct > 40 ? 'rgba(34, 197, 94, 0.7)' :
                        d.ai_pct > 15 ? 'rgba(234, 179, 8, 0.7)' :
                        'rgba(239, 68, 68, 0.7)'
                    ),
                    borderColor: frameworkData.map(d =>
                        d.ai_pct > 40 ? '#22c55e' :
                        d.ai_pct > 15 ? '#eab308' :
                        '#ef4444'
                    ),
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: 'AI Adoption by Framework', color: colors.text },
                    tooltip: {
                        callbacks: {
                            label: (ctx) => {
                                const d = frameworkData[ctx.dataIndex];
                                return `${d.ai_pct}% AI (${d.prs.toLocaleString()} PRs)`;
                            }
                        }
                    },
                    datalabels: {
                        display: true,
                        anchor: 'end',
                        align: 'right',
                        color: colors.text,
                        font: { size: 10 },
                        formatter: (v) => v.toFixed(1) + '%'
                    }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid }, max: 70 },
                    y: { ticks: { color: colors.text, font: { size: 11 } }, grid: { color: colors.grid } }
                }
            }
        });

        // PR Size Chart
        const prSizeData = [
            { size: 'XS (0-10)', prs: 12683, ai_pct: 17.8 },
            { size: 'S (11-50)', prs: 12008, ai_pct: 20.3 },
            { size: 'M (51-200)', prs: 12362, ai_pct: 21.3 },
            { size: 'L (201-500)', prs: 6955, ai_pct: 23.6 },
            { size: 'XL (501+)', prs: 9868, ai_pct: 26.0 }
        ];

        charts.prSize = new Chart(document.getElementById('prSizeChart'), {
            type: 'bar',
            data: {
                labels: prSizeData.map(d => d.size),
                datasets: [{
                    label: 'AI Adoption %',
                    data: prSizeData.map(d => d.ai_pct),
                    backgroundColor: 'rgba(249, 115, 22, 0.7)',
                    borderColor: '#f97316',
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: 'AI Adoption by PR Size (Lines Changed)', color: colors.text },
                    datalabels: {
                        display: true,
                        anchor: 'end',
                        align: 'top',
                        color: colors.text,
                        font: { weight: 'bold' },
                        formatter: (v) => v.toFixed(1) + '%'
                    }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { ticks: { color: colors.text }, grid: { color: colors.grid }, max: 35 }
                }
            }
        });

        // Team Structure Chart
        const teamStructureData = [
            { level: 'High (70%+)', teams: 9, ai_pct: 29.2, contributors: 66 },
            { level: 'Medium (40-70%)', teams: 9, ai_pct: 22.4, contributors: 255 },
            { level: 'Low (<40%)', teams: 7, ai_pct: 19.2, contributors: 452 }
        ];

        charts.teamStructure = new Chart(document.getElementById('teamStructureChart'), {
            type: 'bar',
            data: {
                labels: teamStructureData.map(d => d.level),
                datasets: [{
                    label: 'AI Adoption %',
                    data: teamStructureData.map(d => d.ai_pct),
                    backgroundColor: ['rgba(34, 197, 94, 0.7)', 'rgba(234, 179, 8, 0.7)', 'rgba(99, 102, 241, 0.7)'],
                    borderColor: ['#22c55e', '#eab308', '#6366f1'],
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: 'AI Adoption by Team Concentration (% PRs from Top 5)', color: colors.text },
                    tooltip: {
                        callbacks: {
                            afterLabel: (ctx) => {
                                const d = teamStructureData[ctx.dataIndex];
                                return `${d.teams} teams, ~${d.contributors} contributors avg`;
                            }
                        }
                    },
                    datalabels: {
                        display: true,
                        anchor: 'end',
                        align: 'top',
                        color: colors.text,
                        font: { weight: 'bold', size: 14 },
                        formatter: (v) => v.toFixed(1) + '%'
                    }
                },
                scales: {
                    x: { ticks: { color: colors.text }, grid: { color: colors.grid } },
                    y: { ticks: { color: colors.text }, grid: { color: colors.grid }, max: 35 }
                }
            }
        });

        // Populate table using DOM methods (safer than innerHTML)
        function populateTable() {
            const tbody = document.getElementById('teamTableBody');
            tbody.textContent = ''; // Clear safely

            teamData.forEach(t => {
                const tr = document.createElement('tr');

                const tdTeam = document.createElement('td');
                const strong = document.createElement('strong');
                strong.textContent = t.team;
                tdTeam.appendChild(strong);
                tr.appendChild(tdTeam);

                const tdTotal = document.createElement('td');
                tdTotal.className = 'mono';
                tdTotal.textContent = t.total.toLocaleString();
                tr.appendChild(tdTotal);

                const tdAi = document.createElement('td');
                tdAi.className = 'mono';
                tdAi.textContent = t.ai_pct.toFixed(1) + '%';
                tr.appendChild(tdAi);

                const tdCycle = document.createElement('td');
                if (t.cycle_delta !== null) {
                    const badge = document.createElement('span');
                    badge.className = 'badge ' + (t.cycle_delta < 0 ? 'badge-success' : 'badge-error');
                    badge.textContent = (t.cycle_delta > 0 ? '+' : '') + t.cycle_delta.toFixed(0) + '%';
                    tdCycle.appendChild(badge);
                } else {
                    tdCycle.textContent = '-';
                }
                tr.appendChild(tdCycle);

                const tdReview = document.createElement('td');
                if (t.review_delta !== null) {
                    const badge = document.createElement('span');
                    badge.className = 'badge ' + (t.review_delta < 0 ? 'badge-success' : 'badge-error');
                    badge.textContent = (t.review_delta > 0 ? '+' : '') + t.review_delta.toFixed(0) + '%';
                    tdReview.appendChild(badge);
                } else {
                    tdReview.textContent = '-';
                }
                tr.appendChild(tdReview);

                const tdSize = document.createElement('td');
                if (t.size_delta !== null) {
                    const badge = document.createElement('span');
                    badge.className = 'badge ' + (t.size_delta < 0 ? 'badge-success' : 'badge-warning');
                    badge.textContent = (t.size_delta > 0 ? '+' : '') + t.size_delta.toFixed(0) + '%';
                    tdSize.appendChild(badge);
                } else {
                    tdSize.textContent = '-';
                }
                tr.appendChild(tdSize);

                tbody.appendChild(tr);
            });
        }

        populateTable();
    </script>
</body>
</html>
