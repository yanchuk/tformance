# Regex vs LLM Detection Comparison
# Auto-generated config for comparing detection methods
#
# This config tests the same PRs with LLM and compares against pre-computed regex results.
# Regex results are embedded in each test case's metadata for comparison.
#
# Usage:
#   1. Generate test cases: python manage.py export_comparison_tests --limit 50
#   2. Run evaluation: GROQ_API_KEY=... npx promptfoo eval -c compare-detection.yaml
#   3. View results: npx promptfoo view
#
# The comparison shows:
#   - Where LLM and regex AGREE (both detect or both miss)
#   - Where LLM detects but regex misses (pattern improvement opportunities)
#   - Where regex detects but LLM misses (potential regex false positives)

description: "Regex vs LLM Detection Comparison - Real PR Data"

providers:
  - id: "groq:openai/gpt-oss-20b"
    label: "LLM (GPT-OSS-20B)"
    config:
      temperature: 0
      max_tokens: 800
      response_format:
        type: json_object

prompts:
  - id: "detection-comparison"
    raw: |
      [
        {"role": "system", "content": "{{system_prompt}}"},
        {"role": "user", "content": "{{user_prompt}}"}
      ]

defaultTest:
  vars:
    system_prompt: "file://prompts/v6.3.2-system.txt"

# Test cases will be loaded from external JSON file
# Generated by: python manage.py export_comparison_tests
tests: "file://comparison-test-cases.json"

outputPath: "./results/comparison-results.json"

evaluateOptions:
  maxConcurrency: 3
  showProgressBar: true
