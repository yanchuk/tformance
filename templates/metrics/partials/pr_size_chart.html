{% load i18n %}
<div>
  {% if chart_data %}
  <div class="space-y-3">
    {% for item in chart_data %}
    <a href="{% url 'pullrequests:pr_list' %}?size={{ item.category }}{% if selected_repo %}&repo={{ selected_repo }}{% endif %}"
       target="_blank"
       rel="noopener"
       class="flex items-center gap-3 group cursor-pointer"
       title="{% blocktrans with size=item.category count=item.count %}View {{ count }} {{ size }} PRs{% endblocktrans %}">
      <span class="w-8 text-sm font-medium text-base-content/70 group-hover:text-primary transition-colors">{{ item.category }}</span>
      <div class="flex-1 bg-base-200 rounded-full h-6 overflow-hidden group-hover:ring-2 ring-primary/50 transition-all">
        {% widthratio item.count max_count 100 as bar_width %}
        <div class="h-full rounded-full flex items-center justify-end pr-2 transition-all duration-300
          {% if item.category == 'XS' or item.category == 'S' %}bg-success{% elif item.category == 'M' %}bg-warning{% else %}bg-error{% endif %}"
          style="width: {% if item.count > 0 %}max({{ bar_width }}%, 24px){% else %}0{% endif %};">
          {% if item.count > 0 %}
          <span class="text-xs font-medium text-white">{{ item.count }}</span>
          {% endif %}
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
  <div class="flex justify-center gap-4 mt-4 text-xs text-base-content/80">
    <span class="flex items-center gap-1"><span class="w-3 h-3 rounded bg-success"></span> XS/S: &lt;50 lines</span>
    <span class="flex items-center gap-1"><span class="w-3 h-3 rounded bg-warning"></span> M: 51-200</span>
    <span class="flex items-center gap-1"><span class="w-3 h-3 rounded bg-error"></span> L/XL: &gt;200</span>
  </div>
  {% else %}
  <div class="flex flex-col items-center justify-center h-48">
    <div class="w-12 h-12 mb-3 rounded-full bg-accent-primary/10 flex items-center justify-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-accent-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
      </svg>
    </div>
    <p class="text-base-content/80 font-medium">{% trans "No PR data for this period" %}</p>
  </div>
  {% endif %}
</div>
