{% load i18n %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
  <!-- PRs Merged -->
  <div class="stat bg-base-100 shadow rounded-lg">
    <div class="stat-title">{% trans "PRs Merged" %}</div>
    <div class="flex items-center justify-between">
      <div class="stat-value text-primary" id="prs_merged-value">{{ metrics.prs_merged|default:0 }}</div>
      {% if sparklines.prs_merged.values %}
      <div class="w-20 h-6">
        <canvas
          data-sparkline
          data-sparkline-values="{{ sparklines.prs_merged.values|safe }}"
          data-sparkline-trend="{{ sparklines.prs_merged.trend }}"
          data-sparkline-metric="prs_merged"
        ></canvas>
      </div>
      {% endif %}
    </div>
    <div class="stat-desc flex items-center gap-2">
      {% if sparklines.prs_merged.trend == "up" %}
        <span class="text-success">+{{ sparklines.prs_merged.change_pct }}%</span>
      {% elif sparklines.prs_merged.trend == "down" %}
        <span class="text-error">{{ sparklines.prs_merged.change_pct }}%</span>
      {% else %}
        <span class="text-base-content/50">0%</span>
      {% endif %}
      <span class="text-base-content/50">{% trans "12-week trend" %}</span>
    </div>
  </div>

  <!-- Avg Cycle Time -->
  <div class="stat bg-base-100 shadow rounded-lg">
    <div class="stat-title">{% trans "Avg Cycle Time" %}</div>
    <div class="flex items-center justify-between">
      <div class="stat-value text-secondary" id="cycle_time-value">
        {% if metrics.avg_cycle_time %}{{ metrics.avg_cycle_time|floatformat:1 }}h{% else %}-{% endif %}
      </div>
      {% if sparklines.cycle_time.values %}
      <div class="w-20 h-6">
        <canvas
          data-sparkline
          data-sparkline-values="{{ sparklines.cycle_time.values|safe }}"
          data-sparkline-trend="{{ sparklines.cycle_time.trend }}"
          data-sparkline-metric="cycle_time"
        ></canvas>
      </div>
      {% endif %}
    </div>
    <div class="stat-desc flex items-center gap-2">
      {% if sparklines.cycle_time.trend == "down" %}
        <span class="text-success">{{ sparklines.cycle_time.change_pct }}%</span>
      {% elif sparklines.cycle_time.trend == "up" %}
        <span class="text-error">+{{ sparklines.cycle_time.change_pct }}%</span>
      {% else %}
        <span class="text-base-content/50">0%</span>
      {% endif %}
      <span class="text-base-content/50">{% trans "12-week trend" %}</span>
    </div>
  </div>

  <!-- AI Adoption -->
  <div class="stat bg-base-100 shadow rounded-lg">
    <div class="stat-title">{% trans "AI Adoption" %}</div>
    <div class="flex items-center justify-between">
      <div class="stat-value text-accent" id="ai_adoption-value">
        {% if metrics.ai_assisted_pct %}{{ metrics.ai_assisted_pct|floatformat:0 }}%{% else %}-{% endif %}
      </div>
      {% if sparklines.ai_adoption.values %}
      <div class="w-20 h-6">
        <canvas
          data-sparkline
          data-sparkline-values="{{ sparklines.ai_adoption.values|safe }}"
          data-sparkline-trend="{{ sparklines.ai_adoption.trend }}"
          data-sparkline-metric="ai_adoption"
        ></canvas>
      </div>
      {% endif %}
    </div>
    <div class="stat-desc flex items-center gap-2">
      {% if sparklines.ai_adoption.trend == "up" %}
        <span class="text-success">+{{ sparklines.ai_adoption.change_pct }}%</span>
      {% elif sparklines.ai_adoption.trend == "down" %}
        <span class="text-error">{{ sparklines.ai_adoption.change_pct }}%</span>
      {% else %}
        <span class="text-base-content/50">0%</span>
      {% endif %}
      <span class="text-base-content/50">{% trans "12-week trend" %}</span>
    </div>
  </div>

  <!-- Review Time -->
  <div class="stat bg-base-100 shadow rounded-lg">
    <div class="stat-title">{% trans "Review Time" %}</div>
    <div class="flex items-center justify-between">
      <div class="stat-value text-info" id="review_time-value">
        {% if metrics.avg_quality_rating %}{{ metrics.avg_quality_rating|floatformat:1 }}{% else %}-{% endif %}
      </div>
      {% if sparklines.review_time.values %}
      <div class="w-20 h-6">
        <canvas
          data-sparkline
          data-sparkline-values="{{ sparklines.review_time.values|safe }}"
          data-sparkline-trend="{{ sparklines.review_time.trend }}"
          data-sparkline-metric="review_time"
        ></canvas>
      </div>
      {% endif %}
    </div>
    <div class="stat-desc flex items-center gap-2">
      {% if sparklines.review_time.trend == "down" %}
        <span class="text-success">{{ sparklines.review_time.change_pct }}%</span>
      {% elif sparklines.review_time.trend == "up" %}
        <span class="text-error">+{{ sparklines.review_time.change_pct }}%</span>
      {% else %}
        <span class="text-base-content/50">0%</span>
      {% endif %}
      <span class="text-base-content/50">{% trans "12-week trend" %}</span>
    </div>
  </div>
</div>
