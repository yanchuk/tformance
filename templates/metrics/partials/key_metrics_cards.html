{% load i18n %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
  <!-- PRs Merged -->
  <div class="stat bg-base-100 shadow rounded-lg">
    <div class="stat-title">{% trans "PRs Merged" %}</div>
    <div class="stat-value text-primary">{{ metrics.prs_merged|default:0 }}</div>
    <div class="stat-desc">
      {% if previous_metrics.prs_merged %}
        {% widthratio metrics.prs_merged previous_metrics.prs_merged 100 as pct %}
        {% if metrics.prs_merged > previous_metrics.prs_merged %}
          <span class="text-success">+{{ pct|add:"-100" }}%</span> {% trans "vs prev period" %}
        {% elif metrics.prs_merged < previous_metrics.prs_merged %}
          <span class="text-error">{{ pct|add:"-100" }}%</span> {% trans "vs prev period" %}
        {% else %}
          {% trans "No change" %}
        {% endif %}
      {% else %}
        {% trans "No previous data" %}
      {% endif %}
    </div>
  </div>

  <!-- Avg Cycle Time -->
  <div class="stat bg-base-100 shadow rounded-lg">
    <div class="stat-title">{% trans "Avg Cycle Time" %}</div>
    <div class="stat-value text-secondary">
      {% if metrics.avg_cycle_time %}{{ metrics.avg_cycle_time|floatformat:1 }}h{% else %}-{% endif %}
    </div>
    <div class="stat-desc">{% trans "Time from PR creation to merge" %}</div>
  </div>

  <!-- Avg Quality Rating -->
  <div class="stat bg-base-100 shadow rounded-lg">
    <div class="stat-title">{% trans "Avg Quality" %}</div>
    <div class="stat-value text-accent">
      {% if metrics.avg_quality_rating %}{{ metrics.avg_quality_rating|floatformat:1 }}{% else %}-{% endif %}
    </div>
    <div class="stat-desc">{% trans "Reviewer quality ratings (1-3)" %}</div>
  </div>

  <!-- AI-Assisted % -->
  <div class="stat bg-base-100 shadow rounded-lg">
    <div class="stat-title">{% trans "AI-Assisted" %}</div>
    <div class="stat-value text-info">
      {% if metrics.ai_assisted_pct %}{{ metrics.ai_assisted_pct|floatformat:0 }}%{% else %}-{% endif %}
    </div>
    <div class="stat-desc">{% trans "Of merged PRs" %}</div>
  </div>
</div>
