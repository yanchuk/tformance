{% extends "web/base.html" %}
{% load i18n %}
{% block html_class %}light{% endblock %}
{% block data_theme %}tformance-light{% endblock %}
{% block top_nav %}
  {% include 'web/components/top_nav_app.html' %}
{% endblock %}
{% block body %}
  {% block notifications %}
  {% endblock %}
  <section class="section">
    <div class="container flex flex-row">
      <div class="w-64 flex-shrink-0 hidden lg:flex">
        {% block sidebar-nav %}
          {% include "web/components/app_nav.html" %}
        {% endblock %}
      </div>
      <div class="w-full min-w-0">
        {% block app %}
        {% endblock %}
      </div>
    </div>
  </section>

  <!-- Feedback Comment Modal (global) -->
  {% include "feedback/partials/feedback_modal.html" %}

  <!-- PostHog Survey Floating Button -->
  <button type="button"
          data-testid="posthog-feedback-btn"
          class="fixed bottom-4 right-4 btn btn-primary btn-circle shadow-lg z-40"
          onclick="window.triggerFeedbackSurvey ? window.triggerFeedbackSurvey() : window.open('mailto:feedback@tformance.com?subject=Tformance Feedback', '_blank')"
          title="{% trans 'Send Feedback' %}">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
    </svg>
  </button>
{% endblock %}
