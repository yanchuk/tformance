{% extends "onboarding/base.html" %}
{% load i18n %}

{% block onboarding_content %}
<div class="text-center mb-8">
  <div class="w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-primary/30">
    <i class="fa-brands fa-github text-4xl text-primary"></i>
  </div>
  <h1 class="text-3xl font-bold text-base-content mb-2">{% translate "Connect GitHub Copilot" %}</h1>
  <p class="text-base-content/70 max-w-md mx-auto">
    {% translate "Track AI coding assistant usage and measure its impact on your team's productivity." %}
  </p>
</div>

<div class="app-card max-w-md mx-auto mb-6">
  <h2 class="app-card-title text-center mb-4">{% translate "What you'll get:" %}</h2>
  <ul class="text-left space-y-3 mb-6">
    <li class="flex items-start gap-3">
      <i class="fa-solid fa-chart-line text-primary mt-1"></i>
      <div>
        <span class="text-base-content font-medium">{% translate "Acceptance rate tracking" %}</span>
        <p class="text-xs text-base-content/60 mt-0.5">{% translate "See how often Copilot suggestions are accepted" %}</p>
      </div>
    </li>
    <li class="flex items-start gap-3">
      <i class="fa-solid fa-dollar-sign text-primary mt-1"></i>
      <div>
        <span class="text-base-content font-medium">{% translate "ROI measurement" %}</span>
        <p class="text-xs text-base-content/60 mt-0.5">{% translate "Track seat utilization and cost per contributor" %}</p>
      </div>
    </li>
    <li class="flex items-start gap-3">
      <i class="fa-solid fa-trophy text-primary mt-1"></i>
      <div>
        <span class="text-base-content font-medium">{% translate "Champion identification" %}</span>
        <p class="text-xs text-base-content/60 mt-0.5">{% translate "Recognize top Copilot users on your team" %}</p>
      </div>
    </li>
  </ul>

  <div class="text-center" x-data="{ loading: false }">
    {% if team.copilot_enabled %}
    <div class="app-badge app-badge-success gap-2 mb-3">
      <i class="fa-solid fa-check-circle"></i>
      {% translate "Copilot Connected" %}
    </div>
    {% else %}
    <form method="post" class="inline">
      {% csrf_token %}
      <input type="hidden" name="action" value="connect">
      <button type="submit"
              @click="loading = true"
              class="app-btn-primary gap-2 mb-2"
              :class="{ 'opacity-75 cursor-wait': loading }">
        <i class="fa-brands fa-github" x-show="!loading"></i>
        <i class="fa-solid fa-spinner fa-spin" x-show="loading" x-cloak></i>
        <span x-show="!loading">{% translate "Connect Copilot" %}</span>
        <span x-show="loading" x-cloak>{% translate "Connecting..." %}</span>
      </button>
    </form>
    {% endif %}
    <p class="text-xs text-base-content/50 mt-2">
      {% translate "Requires 5+ Copilot licenses in your GitHub organization." %}
    </p>
  </div>
</div>

{# Skip button form #}
<form method="post" class="max-w-md mx-auto">
  {% csrf_token %}
  <input type="hidden" name="action" value="skip">
  <div class="flex gap-4">
    <a href="{% url 'onboarding:sync_progress' %}" class="app-btn-ghost flex-1">
      <i class="fa-solid fa-arrow-left mr-2"></i>
      {% translate "Back" %}
    </a>
    <button type="submit" class="app-btn-ghost flex-1">
      {% translate "Skip for now" %}
      <i class="fa-solid fa-arrow-right ml-2"></i>
    </button>
  </div>
</form>
{% endblock %}
