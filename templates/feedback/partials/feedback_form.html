{% load i18n %}
<dialog id="feedback-dialog" class="modal modal-open">
  <div class="modal-box">
    <h3 class="font-bold text-lg mb-4">{% trans "Report AI Issue" %}</h3>
    <form method="post"
          action="{% url 'feedback:create' %}"
          hx-post="{% url 'feedback:create' %}"
          hx-target="closest dialog"
          hx-swap="outerHTML">
      {% csrf_token %}

      {% if form.pull_request.value %}
      <input type="hidden" name="pull_request" value="{{ form.pull_request.value }}">
      <div class="alert alert-info mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>{% trans "Reporting issue for selected PR" %}</span>
      </div>
      {% endif %}

      <div class="form-control mb-4">
        <label class="label">
          <span class="label-text">{% trans "Category" %} *</span>
        </label>
        {{ form.category }}
        {% if form.category.errors %}
        <label class="label">
          <span class="label-text-alt text-error">{{ form.category.errors.0 }}</span>
        </label>
        {% endif %}
      </div>

      <div class="form-control mb-4">
        <label class="label">
          <span class="label-text">{% trans "Description" %}</span>
        </label>
        {{ form.description }}
        {% if form.description.errors %}
        <label class="label">
          <span class="label-text-alt text-error">{{ form.description.errors.0 }}</span>
        </label>
        {% endif %}
      </div>

      <div class="form-control mb-4">
        <label class="label">
          <span class="label-text">{% trans "File Path" %}</span>
        </label>
        {{ form.file_path }}
      </div>

      <div class="form-control mb-4">
        <label class="label">
          <span class="label-text">{% trans "Language" %}</span>
        </label>
        {{ form.language }}
      </div>

      <div class="modal-action">
        <button type="button" class="btn btn-ghost" onclick="this.closest('dialog').remove()">
          {% trans "Cancel" %}
        </button>
        <button type="submit" class="btn btn-primary">{% trans "Submit" %}</button>
      </div>
    </form>
  </div>
  <div class="modal-backdrop" onclick="this.closest('dialog').remove()"></div>
</dialog>
