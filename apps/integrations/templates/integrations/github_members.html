{% extends "web/app/app_base.html" %}
{% load static %}
{% load i18n %}

{% block app %}
<section class="app-card">
  <div class="flex items-center justify-between mb-6">
    <div>
      <a href="{% url 'integrations:integrations_home' team_slug=request.team.slug %}"
         class="inline-flex items-center gap-2 text-sm text-base-content/60 hover:text-base-content mb-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        {% translate "Back to Integrations" %}
      </a>
      <h1 class="pg-title">{% translate "GitHub Members" %}</h1>
      <p class="text-base-content/70">{% translate "Manage team members imported from GitHub." %}</p>
    </div>
    {% if request.team_membership.role == 'admin' %}
      <form method="post" action="{% url 'integrations:github_members_sync' team_slug=request.team.slug %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary btn-sm">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
          {% translate "Sync Now" %}
        </button>
      </form>
    {% endif %}
  </div>

  {% if members %}
    <div class="overflow-x-auto">
      <table class="table table-zebra w-full">
        <thead>
          <tr>
            <th>{% translate "Name" %}</th>
            <th>{% translate "GitHub Username" %}</th>
            <th>{% translate "Email" %}</th>
            <th>{% translate "Status" %}</th>
            {% if request.team_membership.role == 'admin' %}
              <th class="text-right">{% translate "Actions" %}</th>
            {% endif %}
          </tr>
        </thead>
        <tbody>
          {% for member in members %}
            {% include "integrations/components/member_row.html" %}
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="mt-4 text-sm text-base-content/60">
      {% blocktranslate count counter=members.count %}
        Showing {{ counter }} member
      {% plural %}
        Showing {{ counter }} members
      {% endblocktranslate %}
    </div>
  {% else %}
    <div class="text-center py-12">
      <svg class="w-16 h-16 mx-auto text-base-content/30 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
      </svg>
      <p class="text-base-content/60 mb-2">{% translate "No GitHub members found" %}</p>
      <p class="text-sm text-base-content/50">
        {% translate "Click the 'Sync Now' button to import members from your GitHub organization." %}
      </p>
    </div>
  {% endif %}
</section>
{% endblock %}
