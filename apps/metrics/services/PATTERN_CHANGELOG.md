# AI Detection Pattern Changelog

This file tracks changes to `ai_patterns.py` and their impact on detection rates.

## Version History

### v1.7.0 (2024-12-24)

**Improvement: +25 new detections** (434 → 459 PRs, 20.2% detection rate)

Added patterns:
- **CodeRabbit text mentions** (22 new detections):
  - `\bsummary\s+by\s+coderabbit\b` - "Summary by CodeRabbit"
  - `\bcoderabbit\.ai\b` - coderabbit.ai domain
  - `\bby\s+coderabbit\b` - "by CodeRabbit"
- **Mintlify agent** (3 new detections):
  - `\bcreated\s+by\s+mintlify\b` - "Created by Mintlify"
  - `\bmintlify\s+agent\b` - "Mintlify agent"
  - `\bgenerated\s+by\s+mintlify\b` - "generated by Mintlify"

### v1.6.0 (2024-12-24)

**Improvement: +26.3% detection increase** (205 → 259 PRs on sample of 1552)

Added patterns:
- **Cubic AI** (59 new detections):
  - `\bsummary\s+by\s+cubic\b` - "Summary by Cubic"
  - `\bauto-generated\s+(?:description\s+)?by\s+cubic\b` - "auto-generated description by Cubic"
  - `\bgenerated\s+by\s+cubic\b` - "generated by Cubic"
- **Cursor.com domain** (1+ new detections):
  - `cursor\.com/(?:background-agent|dashboard)` - Cursor background agent links
- **Copilot Coding Agent** (6 new detections):
  - `\bcopilot\s+coding\s+agent\b` - GitHub Copilot Coding Agent
  - `\bcopilot\s+original\s+prompt\b` - Copilot prompt markers

### v1.5.0 (2024-12-XX)

Added patterns:
- Cursor IDE patterns (12 patterns)
- Claude model names (Opus, Sonnet, Haiku)
- Indirect AI usage patterns ("AI was used to", "used AI for")
- Warp Terminal AI

### v1.4.0 (2024-12-XX)

Added patterns:
- GPT-4o, GPT-5
- Gemini usage patterns
- ChatGPT patterns

## Detection Improvement Workflow

1. Run LLM experiment: `make run-llm-experiment`
2. Analyze disagreements (LLM found, regex missed)
3. Add new patterns to `ai_patterns.py`
4. Bump `PATTERNS_VERSION`
5. Re-run detection on sample PRs
6. Document results in this changelog
7. Update `ai_detection_version` on PRs via backfill

## Pattern Testing

```bash
# Run AI detector tests
.venv/bin/pytest apps/metrics/tests/test_ai_detector.py -v

# Test on sample PRs
DJANGO_SETTINGS_MODULE=tformance.settings .venv/bin/python -c "
from apps.metrics.services.ai_detector import detect_ai_in_text
result = detect_ai_in_text('Summary by Cubic. Used Cursor IDE.')
print(result)
"
```

## Tool Breakdown (v1.6.0)

| Tool | Count | % of Detected |
|------|-------|---------------|
| devin | 68 | 26.3% |
| cubic | 59 | 22.8% |
| claude_code | 40 | 15.4% |
| claude | 37 | 14.3% |
| cursor | 32 | 12.4% |
| copilot | 16 | 6.2% |
| ai_generic | 14 | 5.4% |
| chatgpt | 14 | 5.4% |
| gemini | 1 | 0.4% |
| warp | 1 | 0.4% |
